# Moni 배포 가이드

## 초기 설정 (최초 1회)

### 1. GAS 편집기에서 Web App 배포 생성

1. [GAS 편집기](https://script.google.com/)에서 프로젝트 열기
2. **배포** > **새 배포** 클릭
3. 설정:
   - **배포 유형**: 웹 앱
   - **설명**: Production
   - **다음으로 실행**: **본인 (Me)** ← 중요!
   - **액세스할 수 있는 사용자**: 액세스한 사람
4. **배포** 클릭
5. 나온 **Web App URL**을 `.env.local`에 설정

### 2. 프론트엔드 환경변수 설정

`frontend/.env.local`:
```env
VITE_GAS_WEB_APP_URL=<GAS 편집기에서 배포 후 나온 URL>
```

> 이 URL은 영구적입니다. 배포 관리에서 버전을 업데이트하면 URL은 유지됩니다.

---

## 일반적인 개발 워크플로우

### 1. 코드 업로드 (GAS 서버)
로컬 코드를 구글 서버로 업로드합니다. **이 단계에서는 실제 Web App에 반영되지 않습니다.**

```bash
cd backend
clasp push --force
```

### 2. 배포 버전 업데이트 (웹에서 수행)
업로드된 코드를 실제 Web App(URL)에 적용하기 위해 버전을 업데이트합니다.

1. `clasp open` 명령어로 [GAS 편집기](https://script.google.com/) 열기
2. 우측 상단 **배포** > **배포 관리** 클릭
3. 현재 활성화된 배포의 **설정(연필 아이콘/수정)** 클릭
4. **버전** 드롭다운에서 **'새 버전'** 선택
5. **배포** 클릭

> **Tip:** 이렇게 기존 배포를 수정해야 URL이 변경되지 않습니다.

---

## 주의사항

- **`clasp deploy` 사용 금지**: 이 명령어를 사용하면 새로운 배포(새 URL)가 생성되므로 사용하지 않습니다.
- **버전 관리**: GAS의 버전 관리는 배포 시점에 의존하므로, 소스 코드의 형상 관리는 **Git**을 이용합니다.

---

## 빠른 참고

| 명령어 | 용도 |
|--------|------|
| `clasp push --force` | 로컬 코드를 GAS 서버로 업로드 (반영 X) |
| `clasp open` | GAS 웹 편집기 열기 (배포 수정 시 사용) |